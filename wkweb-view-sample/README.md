#  Yubico WKWebView sample

This sample app demonstrates how to use the PIV/CryptoTokenKit functionality provided by the Yubico Authenticator app from a `WKWebView`. The CryptoTokenKit extension implemented in the Yubico Authenticator will let a user store the public parts of a certificate on their iPhone. The certificate will then be available to Safari, Mail and other apps that has implemented support for CTK extensions. If for example Safari wants to sign a auth request, iOS will ask the user which certificate to use and will then open the app that stored that specific certificate and ask it to sign the request.

To enable the app to read the certificates stored by the Yubico Authenticator (or any other app providing a CTK extension) it needs the Keychain Sharing capability enabled and the Keychain Access Group `com.apple.token` set. The functionality that lets the user select which certificate to use and relays that selection to iOS is implemented in `WebView.swift`. Here a `WKWebView` is wrapped in a `UIViewRepresentable` and parts of the `WKNavigationDelegate`protocol is implemented. When a website sends a auth challenge to the app the protocol method `webView(webView: didReceive challenge:, completionHandler:)` will be called. This is where the app lists installed certificates and let the user select which one to use. Lastly it calls the completionHandler with the selected certificate. At this point the CTK extension in the Yubico Authenticator is called and the app will handle the signing of the auth challenge.
